const{lang:lang,baseUrl:baseUrl,oldBaseUrl:oldBaseUrl}=window.AppConfig,videoSrc=[{left:"/assets/videos/触控板三指上下.mp4",right:"/assets/videos/触控板三指窗口大小.mp4"},{left:"/assets/videos/触控板四指左右.mp4",right:"/assets/videos/触控板四指切换桌面.mp4"}];let workerCurrentIndex=1;const translations={en:[{aiTitle:"AI Search",aiDesc:"Find files with just one word"},{aiTitle:"AI Assistant",aiDesc:"Simply swipe to enjoy AI"},{aiTitle:"AI Writing",aiDesc:"Thinking for You, Effortlessly Creating"}],zh:[{aiTitle:"AI搜索",aiDesc:"一句话随心找文件"},{aiTitle:"AI写作",aiDesc:"想你所想，轻松创作"},{aiTitle:"AI随航",aiDesc:"轻轻一划，即享AI"}]},workerVideos={zh:["/assets/videos/ai-search.mp4","/assets/videos/ai-write.mp4","/assets/videos/ai-assistant.mp4"],en:["/assets/videos/ai-search-en.mp4","/assets/videos/ai-write-en.mp4","/assets/videos/ai-assistant-en.mp4"]},observers=[],delay=e=>new Promise((t=>setTimeout(t,e)));document.addEventListener("DOMContentLoaded",(function(){!function(){const e=document.querySelector("#ai-left"),t=document.querySelector("#ai-right"),r=document.querySelector(".ai .content .left .replay"),s=document.querySelector(".ai .content .right .replay");"en"===lang?(e.setAttribute("data-src",baseUrl+"/assets/videos/voice-en.mp4"),t.setAttribute("data-src",baseUrl+"/assets/videos/qa-en.mp4")):(e.setAttribute("data-src",baseUrl+"/assets/videos/voice.mp4"),t.setAttribute("data-src",baseUrl+"/assets/videos/qa.mp4")),r.addEventListener("click",(()=>{e.currentTime=0,e.play()})),s.addEventListener("click",(()=>{t.currentTime=0,t.play()})),e.addEventListener("ended",(()=>{r.style.visibility="visible"})),e.addEventListener("play",(()=>{r.style.visibility="hidden"})),t.addEventListener("ended",(()=>{s.style.visibility="visible"})),t.addEventListener("play",(()=>{s.style.visibility="hidden"}));const n=new IntersectionObserver((e=>{e.forEach((e=>{e.isIntersecting?e.target.play():e.target.pause()}))}),{threshold:.8});n.observe(document.querySelector("#ai-left")),n.observe(document.querySelector("#ai-right")),observers.push(n);const o=document.querySelector("#aiAnswerVideo"),i=document.querySelector(".ai .answer .replay");"en"===lang?o.setAttribute("data-src",baseUrl+"/assets/videos/aibar-en.mp4"):o.setAttribute("data-src",baseUrl+"/assets/videos/aibar.mp4"),i.addEventListener("click",(()=>{o.currentTime=0,o.play()}));const c=new IntersectionObserver((e=>{e.forEach((e=>{e.isIntersecting?e.target.play():e.target.pause()}))}),{threshold:1});c.observe(document.querySelector("#aiAnswerVideo")),observers.push(c)}(),function(){const e=document.querySelector("#cross"),t=document.querySelector(".cross .replay"),r="en"===lang?"/assets/videos/cooperate-en.mp4":"/assets/videos/cooperate.mp4";e.setAttribute("data-src",baseUrl+r),t.addEventListener("click",(()=>{e.currentTime=0,e.play()})),e.addEventListener("ended",(()=>{t.classList.toggle("visible")})),e.addEventListener("play",(()=>{t.classList.remove("visible")}));const s=document.querySelector(".support-dialog-wrap");s.addEventListener("wheel",(e=>{e.preventDefault()}),{passive:!1}),document.querySelector(".cross .support-btn").addEventListener("click",(()=>{s.style.display="block",e.pause()})),document.querySelector(".support-dialog .close-btn").addEventListener("click",(t=>{t.stopPropagation(),s.style.display="none",e.play()}));const n=new IntersectionObserver((e=>{e.forEach((e=>{e.isIntersecting&&e.target.classList.contains("fullscreen-cover2")&&function(e,t,r,s=!1){window.scrollTo({top:document.querySelector(t).offsetTop,behavior:"smooth"}),setTimeout((()=>{const n=document.body.clientWidth<1700,o=document.body.clientWidth>=2200,i=document.querySelector(t).getBoundingClientRect(),c=document.querySelector(r).getBoundingClientRect();e.style.top=c.top-i.top+(s?n?82:o?119:90:5)+"px",e.style.left=c.left-i.left+(s?n?193:o?279:211:0)+"px",e.style.right=i.right-c.right+(s?n?211:o?301:230:0)+"px",e.style.borderRadius="7px",setTimeout((()=>{e.style.opacity=0,setTimeout((()=>{e.style.display="none",e.style.top="0",e.style.left="0",e.style.right="0",e.style.transition="none",document.querySelector("#cross").play()}),500)}),500)}),500)}(e.target,".cross",".cross #cross",!0)}))}),{threshold:.4});n.observe(document.querySelector(".fullscreen-cover2")),observers.push(n);const o=new IntersectionObserver((e=>{e.forEach((e=>{if("cross"===e.target.id){if("block"===document.querySelector(".fullscreen-cover2").style.display)return;e.isIntersecting?e.target.play():e.target.pause()}}))}),{threshold:.8});o.observe(document.querySelector("#cross")),observers.push(o);const i=new IntersectionObserver((e=>{e.forEach((e=>{if("SPAN"===e.target.tagName&&e.isIntersecting){const e=document.querySelector(".fullscreen-cover2");e.style.opacity=1,e.style.transition="all 0.5s ease-in-out",e.style.display="block",document.querySelector("#cross").currentTime=0,document.querySelector("#cross").pause()}}))}),{threshold:.5});i.observe(document.querySelector(".ai .answer .right .replay span")),observers.push(i)}(),function(){const e=document.querySelector("#desktopVideo"),t=document.querySelector(".desktop .replay");e.addEventListener("ended",(()=>{t.classList.add("visible")})),e.addEventListener("play",(()=>{t.classList.remove("visible")})),e.setAttribute("data-src",baseUrl+"/assets/videos/new-desktop.mp4"),t.addEventListener("click",(()=>{e.currentTime=0,e.play()}));const r=new IntersectionObserver((e=>{if(e[0].isIntersecting){const e=document.querySelector(".fullscreen-cover");e.style.opacity=1,e.style.transition="all 0.5s ease-in-out",e.style.display="block";const t=document.querySelector("#desktopVideo");t.currentTime=0,t.pause()}}),{threshold:[.8]});r.observe(document.querySelector(".monolith .title")),observers.push(r);const s=new IntersectionObserver((e=>{e.forEach((e=>{e.isIntersecting&&(window.scrollTo({top:document.querySelector(".desktop").offsetTop,behavior:"smooth"}),async function(e){await delay(600);const t=document.querySelector(".desktop").getBoundingClientRect(),r=document.querySelector(".desktop video").getBoundingClientRect();e.style.top=r.top-t.top+5+"px",e.style.left=r.left-t.left+"px",e.style.right=t.right-r.right+"px",e.style.borderRadius="7px",await delay(500),e.style.opacity=0,await delay(500),e.style.display="none",e.style.top="0",e.style.left="0",e.style.right="0",e.style.transition="none",document.querySelector(".desktop video").play()}(e.target))}))}),{threshold:.4});s.observe(document.querySelector(".fullscreen-cover")),observers.push(s);const n=new IntersectionObserver((e=>{e.forEach((e=>{if(e.isIntersecting){if("block"===document.querySelector(".fullscreen-cover").style.display)return;e.target.play()}else e.target.pause()}))}),{threshold:1});n.observe(document.querySelector(".desktop video")),observers.push(n)}(),function(){const e=document.querySelector("#dialog-video"),t=document.querySelector(".video-dialog");"en"==lang?e.setAttribute("data-src",baseUrl+"/assets/videos/v25-release-en.mp4"):e.setAttribute("data-src",baseUrl+"/assets/videos/v25-release.mp4"),document.querySelector(".video-dialog img").addEventListener("click",(()=>{e.pause(),e.currentTime=0,t.style.display="none"})),document.querySelector(".banner1 .content .btn").addEventListener("click",(()=>{t.style.display="block",e.currentTime=0,e.play()}))}(),function(){document.querySelector("#app > d-header").shadowRoot.querySelector("div").style.position="unset";const e=document.querySelector(".monolith"),t=new IntersectionObserver((t=>{t.forEach((t=>{const r=t.intersectionRect.height,s=t.boundingClientRect.height-64;if(r<=window.innerHeight-780+64)return void(e.style.borderRadius="0");const n=Math.min(680,r/s*680);e.style.borderRadius=`${n}px ${n}px 0 0`}))}),{threshold:Array.from({length:101},((e,t)=>t/100))});t.observe(e),observers.push(t)}(),function(){const e=document.querySelectorAll(".window-tube .content .right .video");e.forEach(((e,t)=>{e.setAttribute("data-src",oldBaseUrl+videoSrc[0][0===t?"left":"right"])}));const t=document.querySelector(".window-tube .content .right img"),r=document.querySelectorAll(".window-tube .content .left .tab .btn");document.querySelector(".window-tube .content .left .tab").addEventListener("click",(t=>{if(t.target.classList.contains("btn")||t.target.parentElement.classList.contains("btn")){const s=t.target.classList.contains("btn")?t.target:t.target.parentElement,n=document.querySelector(".window-tube .content .left .tab .bg"),o=Array.from(r).indexOf(s);r.forEach((e=>e.classList.remove("active"))),n.style.left=0===o?"0":"calc(50% + 1.5px)",s.classList.add("active"),e.forEach(((e,t)=>{e.src=oldBaseUrl+videoSrc[o][0===t?"left":"right"],e.play()}))}})),e[0].addEventListener("ended",(()=>{document.querySelector(".window-tube .content .right img").style.visibility="visible"})),e[0].addEventListener("play",(()=>{document.querySelector(".window-tube .content .right img").style.visibility="hidden"})),t.addEventListener("click",(()=>{e.forEach((e=>{e.currentTime=0,e.play()}))}));const s=new IntersectionObserver((e=>{e.forEach((e=>{const t=document.querySelectorAll(".window-tube .content .right .data video");e.isIntersecting?t.forEach((e=>{e.play()})):t.forEach((e=>{e.currentTime=0,e.pause()}))}))}),{threshold:.5});s.observe(document.querySelector(".window-tube .content .right .data video")),observers.push(s)}(),function(){const e=document.querySelector(".worker .banner"),t=document.querySelectorAll(".worker .banner .img"),r=document.querySelector(".worker .toolbar .button.left"),s=document.querySelector(".worker .toolbar .button.right");function n(){const e=[["calc(50% - 30rem)","calc(50% + 35rem)","200%"],["calc(50% - 95rem)","calc(50% - 30rem)","calc(50% + 35rem)"],["-200%","calc(50% - 95rem)","calc(50% - 30rem)"]];t.forEach(((t,r)=>{t.style.left=e[workerCurrentIndex][r],t.classList.toggle("opacity",workerCurrentIndex!=r)})),document.getElementById("worker-ai-title").textContent=translations[lang][workerCurrentIndex].aiTitle,document.getElementById("worker-ai-desc").textContent=translations[lang][workerCurrentIndex].aiDesc,r.classList.toggle("disabled",0===workerCurrentIndex),s.classList.toggle("disabled",2===workerCurrentIndex);document.querySelectorAll(".worker .banner .img video").forEach(((e,t)=>{t===this.workerCurrentIndex?(e.currentTime=0,setTimeout((()=>e.play()),500)):(e.pause(),e.currentTime=0)}))}function o(){0!==workerCurrentIndex&&(workerCurrentIndex--,n())}function i(){2!==workerCurrentIndex&&(workerCurrentIndex++,n())}e.addEventListener("click",(e=>{if(e.target.matches(".worker .banner .img img")){const e=document.getElementById(`worker${workerCurrentIndex}`);e.currentTime=0,e.play()}else if(e.target.closest(".worker .banner .img")){const t=e.target.closest(".worker .banner .img"),r=Array.from(document.querySelectorAll(".worker .banner .img")).indexOf(t);if(workerCurrentIndex===r)return;r>workerCurrentIndex?i():o()}})),document.getElementById("worker-ai-title").textContent=translations[lang][workerCurrentIndex].aiTitle,document.getElementById("worker-ai-desc").textContent=translations[lang][workerCurrentIndex].aiDesc,r.addEventListener("click",o),s.addEventListener("click",i);const c=document.getElementById("worker0");c.setAttribute("data-src",baseUrl+workerVideos[lang][0]),c.addEventListener("ended",(()=>{document.querySelector(".worker .banner .img.left img").style.visibility="visible"})),c.addEventListener("play",(()=>{document.querySelector(".worker .banner .img.left img").style.visibility="hidden"}));const l=document.getElementById("worker1");l.setAttribute("data-src",baseUrl+workerVideos[lang][1]),l.addEventListener("ended",(()=>{document.querySelector(".worker .banner .img:nth-child(2) img").style.visibility="visible"})),l.addEventListener("play",(()=>{document.querySelector(".worker .banner .img:nth-child(2) img").style.visibility="hidden"}));const a=document.getElementById("worker2");a.setAttribute("data-src",baseUrl+workerVideos[lang][2]),a.addEventListener("ended",(()=>{document.querySelector(".worker .banner .img.right img").style.visibility="visible"})),a.addEventListener("play",(()=>{document.querySelector(".worker .banner .img.right img").style.visibility="hidden"}));const d=new IntersectionObserver((e=>{e.forEach((e=>{e.isIntersecting?setTimeout((()=>{e.target.play()}),500):e.target.pause()}))}),{threshold:.9});d.observe(document.querySelector("#worker0")),d.observe(document.querySelector("#worker1")),d.observe(document.querySelector("#worker2")),observers.push(d)}()})),window.addEventListener("beforeunload",(()=>{observers.forEach((e=>{e&&e.disconnect()}))}));